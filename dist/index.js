"use strict";new Vue({el:"#app",data:{currentWth:{temperature:"--"},forecastWth:"",forecastWeek:[]},ready:function(){console.log(BMap),window.init=this.getLocation},methods:{getLocation:function(){var e=this,t=new BMap.Geolocation;t.getCurrentPosition(function(t){0==this.getStatus()?(console.log("您的位置："+t.point.lng+","+t.point.lat),e.getMyaddress(t.point.lng,t.point.lat),e.getCurrentwth(t.point.lng,t.point.lat),e.getForecastrwth(t.point.lng,t.point.lat)):alert("failed"+this.getStatus())},{enableHighAccuracy:!0})},getMyaddress:function(e,t){var a=new BMap.Point(e,t),n=new BMap.Geocoder;n.getLocation(a,function(e){var t=e.addressComponents;document.getElementById("address").innerHTML=t.city})},getCurrentwth:function(e,t){var a=this;this.$http.jsonp("https://api.caiyunapp.com/v2/DxGJIQ==5n8qq9Np/"+e+","+t+"/realtime.jsonp").then(function(e){var t=e.body.result;t.temperature=parseInt(t.temperature),a.$set("currentWth",t)})},getForecastrwth:function(e,t){var a=this;this.$http.jsonp("https://api.caiyunapp.com/v2/DxGJIQ==5n8qq9Np/"+e+","+t+"/forecast.jsonp").then(function(e){var t=e.body.result.hourly;a.$set("forecastWth",t);for(var n=e.body.result.daily.temperature,r=e.body.result.daily.skycon,o=[],i=0;i<r.length;i++)o.push([r[i].value]);for(var s=0;s<n.length;s++)o[s].push(n[s].date),o[s].push(parseInt(n[s].max)),o[s].push(parseInt(n[s].min));a.$set("forecastWeek",o)})},skyVal:function(e){var t=void 0,a=void 0;switch(e){case"CLEAR_DAY":t="晴天",a="icon-weather";break;case"CLEAR_NIGHT":t="晴夜",a="icon-weathernight";break;case"PARTLY_CLOUDY_DAY":t="多云",a="icon-weathercloudy";break;case"PARTLY_CLOUDY_NIGHT":t="多云",a="icon-weathercloudy";break;case"CLOUDY":t="阴",a="icon-yin";break;case"RAIN":t="雨",a="icon-weatherrainy";break;case"SLEET":t="冻雨",a="icon-tianqizitiku33";break;case"SNOW":t="雪",a="icon-weathersnow";break;case"WIND":t="风",a="icon-weatherwindy";break;case"FOG":t="雾",a="icon-weatherfog";break;case"HAZE":t="霾",a="icon-maihaze"}return[t,a]},getWeek:function(e){var t=new Array;t=e.split("-");var a=new Date(t[0],parseInt(t[1]-1),t[2]),n=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六"),r=a.getDay(),o=n[r];return o}}});